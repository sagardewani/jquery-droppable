/* ========================================================================
 * Dset: jQuery.droppable.min.js v1.0.0
 * ========================================================================
 * Copyright 2017 Hetrotech Private Limited.
 * Licensed under MIT
 * ======================================================================== */
!function(e,t){"use strict";function s(e){new c(e)}function n(e,t,s){i(e,this.$selected.element,t,s)}function i(e,t,s,n){if(e)if(n.set){var i=n.size,o=n.origin,d=n.repeat,r=n.position;t.css("background-image",'url("'+e+'")'),t.css("background-origin",o),t.css("background-position",r),t.css("background-repeat",d),t.css("background-size",i)}else if(s){var a=new Image;a.onload=function(e){a.className="drop-img",t.append(a)},a.src=e}else"IMG"==t.prop("tagName")?t.attr("src",e):t.html('<img class="drop-img" src='+e+" />")}function o(e,s,n,i){if(t.Promise)return new Promise(function(t,o){var d,r=i||5e3,a=new Image;a.onerror=a.onabort=function(){clearTimeout(d),o(Error("Image URL is not retrievable\n Please drop image with actual URL(might not in encoded form)"))},a.onload=function(e){if(clearTimeout(d),n){var i,r,l;i=s.maxDimensions.height,r=s.maxDimensions.width,l=s.minDimensions.height,a.width>r||a.width<void 0?o(Error("The image dimensions doesn't match the specified criteria of\n Max Width: "+r+"px or Min Width: "+void 0+"px")):a.height>i||a.height<l?o(Error("The image dimensions doesn't match the specified criteria of\n Max Height: "+i+"px or Min Height: "+l+"px")):t("success")}else t("success")},d=setTimeout(function(){a.src="//!!!!/test.jpg",o("timeout")},r),a.src=e});throw new Error("Please upgrade your browser\n This doesn't support the Promises.")}function d(e){var t=[],s=this,i=(s.keys.maxSize,s.keys.dimensions),d=s.keys.customDimensions,r=s.keys.background;s.$selected.element;e.originalEvent.dataTransfer&&(t=e.originalEvent.dataTransfer.items);for(var a=0;a<1;a++)t[a].getAsString(function(e){o(e,i,d).then(function(t){"success"==t&&n.call(s,e,d,r)}).catch(function(e){console.log(e)})})}function r(){var t=document.createElement("div"),s=document.createElement("ul"),n=document.createElement("a");n.setAttribute("href","javascript:void(0);"),n.setAttribute("onClick","toggleShow("+t+")"),n.setAttribute("class","pull-right"),t.setAttribute("id","cmdListContainer"),t.setAttribute("class","d-set cmdsList style-4 hide"),s.setAttribute("id","cmdList"),s.innerHTML="<header>Commands List</header>",s.setAttribute("class","d-set"),s.style.background="#e7e7e7",e(t).append(n),e(t).append(s),e("body").append(t),e.fn.settings.commands.created=1}function a(){0==e.fn.settings.modalCreated&&l()}function l(){e("body").append('<div id="source-container" class="modal fade d-set" role="dialog">\t\t  <div class="modal-dialog d-set">\t\t\t<div class="modal-content d-set">\t\t\t  <div class="modal-header d-set">\t\t\t\t<button type="button" class="close d-set" data-dismiss="modal">&times;</button>\t\t\t\t<h4 class="modal-title d-set">CSS Styles</h4>\t\t\t  </div>\t\t\t  <div class="modal-body d-set">\t\t\t\t<pre class="d-set"></pre>\t\t\t  </div>\t\t\t  <div class="modal-footer d-set">\t\t\t\t<button type="button" class="btn btn-default d-set" data-dismiss="modal">Close</button>\t\t\t  </div>\t\t\t</div>\t\t</div>\t\t</div>'),e.fn.settings.modalCreated=1}var c=function(s){a(),e.fn.settings.commands.created||r(),this.keys=e.extend({},e.fn.droppable.defaults,s),this.droppableObject,this.previous,this.$selected={element:"undefined",drop:"undefined",dragLeave:"undefined",dragOver:"undefined",dropActive:"undefined",tagName:"undefined"},e(t).on("click",e.proxy(this.onDropSelect,this)).off("keydown",e.fn.settings.onKeyDown).on("keydown",e.proxy(e.fn.settings.onKeyDown,this)).on("keydown",e.proxy(e.fn.settings.onDropKeyDown,this)),e.fn.settings.commands.common(),e.fn.settings.commands.drop()};c.VERSION="1.0.0",c.pluginName="DROPPABLE",c.AUTHOR="Sagar Dewani",c.WEBSITE="http://www.hetrotech.in/",e.fn.droppable=function(e){return s(e)},t.$.droppable=e.fn.droppable;var f={disableSelect:[e("body"),e("#wrapper"),e("html"),e("option")],defSetting:{droppable:0},modalCreated:0,commands:{common:function(){var t,s,n=["alt+shift+ctrl","ctrl+m","ENTER"],i=["to go back to normal mode","to check which mode is active","to view the source generated"];for(t=0;t<n.length;t++)s="<li class='d-set'><pre class='d-set'><code class='d-set'><i class='d-set'>"+n[t]+"</i> : "+i[t]+"</code></pre></li>",e("#cmdList").append(s)},drop:function(){var t,s,n=["shift+i"],i=["to (de)activate droppable mode"];for(t=0;t<n.length;t++)s="<li class='d-set'><pre class='d-set'><code class='d-set'><i class='d-set'>"+n[t]+"</i> : "+i[t]+"</code></pre></li>",e("#cmdList").append(s)},created:0},onKeyDown:function(t){var s=this;if("undefined"!==s.$selected.element){if(t.shiftKey&&t.ctrlKey&&t.altKey)for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&(e.fn.settings.defSetting[n]=0);if(t.ctrlKey&&t.which==s.keys.modeKey){var i="normal";for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&1==e.fn.settings.defSetting[n]&&(i=n);alert("Activated Mode: "+i)}if(t.which==s.keys.sourceKey)if(e.fn.settings.defSetting.transition){e(".modal-body>pre").empty();var o,d,r=e("style#d-set-stylesheet")[0].sheet?e("style#d-set-stylesheet")[0].sheet:e("style#d-set-stylesheet")[0].styleSheet,a=r.rules?r.rules:r.cssRules,l=(a.length,a.length),c=s.$selected.element.attr("class").split(" ");for(o=0;o<l;o++)d=a[o].selectorText.replace(".",""),c.indexOf(d)>-1?e(".modal-body>pre").append("<code class=d-set style='background-color:#7fdfde;'>"+a[o].cssText+"</code><br/>"):e(".modal-body>pre").append("<code class=d-set>"+a[o].cssText+"</code><br/>");e("#source-container").modal("show")}else(e.fn.settings.defSetting.colorify||e.fn.settings.defSetting.reposizing)&&(e(".modal-body>pre").empty(),e(".modal-body>pre").append("<code class=d-set>"+s.$selected.element.attr("style")+"</code><br/>"),e("#source-container").modal("show"))}t.altKey&&"72"==t.which&&e("#cmdListContainer").toggleClass("hide")},onDropKeyDown:function(t){var s=this;if("undefined"!==s.$selected.element){if(t.shiftKey&&t.which==s.keys.droppableKey){for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&e.fn.settings.defSetting.droppable||(e.fn.settings.defSetting[n]=0);e.fn.settings.defSetting.droppable=0==e.fn.settings.defSetting.droppable?1:0}if(t.which==s.keys.sourceKey&&e.fn.settings.defSetting.droppable){e(".modal-body>pre").empty();var i;s.keys.background.set?(i="{",i+=s.$selected.element.attr("style"),i+="}"):i="Add these elements   &ltimg class='drop-img' src='your-img-path' /&gt",e(".modal-body>pre").append("<code class=d-set>"+i+"</code><br/>"),e("#source-container").modal("show")}}}};e.fn.settings=e.extend(!0,{},e.fn.settings||{},f),e.fn.droppable.defaults={droppableKey:"73",sourceKey:"13",modeKey:"77",dimensions:{maxDimensions:{width:1920,height:1080},minDimensions:{width:1,height:1}},customDimensions:!0,background:{set:!1,position:"initial",size:"cover",repeat:"no-repeat",origin:"content-box"}},c.prototype.onDropSelect=function(t){var s,n=this,i=e.fn.settings.disableSelect,o=i.length;for(s=0;s<o;s++)if(e(t.target).is(i[s]))return;e(t.target).is('[class*="d-set"]')||(n.$selected.element=e(t.target),n.$selected.dragOver="undefined"!=n.$selected.element?function(){var t;return this.$selected.element.off("dragover").on("dragover",function(s){s.preventDefault(),s.stopPropagation(),(t=e.fn.settings.defSetting.droppable)&&e(this).addClass("dragOver")})}.call(n):"undefined",n.$selected.dragLeave="undefined"!=n.$selected.element?function(){var t;return this.$selected.element.off("dragleave").on("dragleave",function(s){s.preventDefault(),s.stopPropagation(),(t=e.fn.settings.defSetting.droppable)&&e(this).removeClass("dragOver")})}.call(n):"undefined",n.$selected.drop="undefined"!=n.$selected.element?function(){var t,s=this;return this.$selected.element.off("drop").on("drop",function(n){n.preventDefault(),n.stopPropagation(),(t=e.fn.settings.defSetting.droppable)&&(e(this).removeClass("dragOver"),d.call(s,n))})}.call(n):"undefined",n.$selected.tagName="undefined"!=n.$selected.element?n.$selected.element[0].tagName.toLowerCase():"undefined",n.$selected.dropActive="undefined"!=n.$selected.element?e.fn.settings.defSetting.droppable:"undefined",n.$selected.element&&(n.previous&&n.previous.hasClass("border-blue")&&n.previous.removeClass("border-blue"),n.previous=n.$selected.element,n.previous.addClass("border-blue")))}}(jQuery,window);